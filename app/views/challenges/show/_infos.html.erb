<div class="card p-4 border-secondary-subttle rounded-4 mb-4">
  <div class="card-body">
    <p class="card-text text-muted"><%= challenge.description %></p>

    <div class="mb-3">
      <span class="badge bg-info text-dark me-2">Category: <%= challenge.category.capitalize %></span>
      <span class="badge bg-warning text-dark me-2">Difficulty: <%= challenge.difficulty.capitalize %></span>
    </div>

    <ul class="list-group list-group-flush mb-3">
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <strong>Start Date:</strong>
        <span><%= challenge.start_date&.strftime("%B %d, %Y") %></span>
      </li>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <strong>End Date:</strong>
        <span><%= challenge.end_date.strftime("%B %d, %Y") %></span>
      </li>
    </ul>

    <% if user_signed_in? %>
      <div class="d-flex gap-2 mb-3">
        <% if current_user.challenges.include?(challenge) %>
          <%= button_to 'Leave Challenge', leave_challenge_path(challenge), method: :delete, class: 'btn btn-danger flex-grow-1' %>
        <% else %>
          <%= button_to 'Join Challenge', join_challenge_path(challenge), method: :post, class: 'btn btn-success flex-grow-1' %>
        <% end %>
        <%= link_to 'Submit Visualization', new_challenge_visualization_path(challenge), class: 'btn btn-primary flex-grow-1' %>
      </div>
    <% end %>
  </div>
</div>
